
<div class="row">
  <div class="col7">

    <h2 id="prerequisites">Prerequisites</h2>

    <p>For this tutorial, you will need:</p>
    <ul>
      <li>A minimal CentOS server.</li>
      <li>Passbolt CentOS package installed.</li>
    </ul>

    <h2 id="update-passbolt">Update passbolt</h2>
    <h3 id="take-down-your-site">1. Take down your site</h3>

    <p>It is generally a good idea to stop running the site prior to the upgrade. This is to avoid having side effects
such as active users corrupting the data in the middle of an upgrade.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>systemctl stop nginx
</code></pre></div>    </div>

    <h3 id="backup-your-database">2. Backup your database</h3>

    <p>It is recommended to always perform a backup of your passbolt installation. Please check the <a href="/hosting/backup">backup</a> article</p>

    <h3 id="upgrade-your-system">3. Upgrade your system</h3>

    <p>This commands will trigger an upgrade on your whole CentOS system:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>yum update
</code></pre></div>    </div>

    <h3 id="clear-the-cache">4. Clear the cache</h3>

    <p>Finally make sure you clear the application cache, to make sure any changes in the database structure are
reflected in model cache files:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-H</span> <span class="nt">-u</span> nginx bash <span class="nt">-c</span> <span class="s2">"/usr/share/php/passbolt/bin/cake cache clear_all"</span>
</code></pre></div>    </div>

    <h3 id="bring-your-site-back-online">5. Bring your site back online</h3>

    <p>Almost done:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start nginx
</code></pre></div>    </div>

    <h2 id="troubleshooting">Troubleshooting</h2>

    <h4 id="verifying-the-status-of-the-application">Verifying the status of the application</h4>
    <p>Optionally, you can login as an administrator and check the status on the healthcheck page:</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/screenshots/AD_healthcheck.jpg" alt="Example of healthcheck screen" style="max-width:;" />
    <span class="legend">fig. Example of healthcheck screen</span>
</figure>

    <p>You can also run the following command:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-H</span> <span class="nt">-u</span> nginx bash <span class="nt">-c</span> <span class="s2">"/usr/share/php/passbolt/bin/cake passbolt healthcheck"</span>
</code></pre></div>    </div>

    <h4 id="if-you-run-into-some-issues">If you run into some issues</h4>

    <p>If you run into some issues:</p>
    <ul>
      <li>Make a copy or screenshot of the errors messages displayed on the screen</li>
      <li>Check for error message in the <code class="language-plaintext highlighter-rouge">logs</code> directory</li>
      <li>Check for error message in the browser console</li>
      <li>Checkout the previous working version using git</li>
      <li>Drop the database and load your backup data to restore to a previously working version</li>
      <li>Note down the the details of you environment: your OS, php, mysql environment versions.</li>
    </ul>

    <p>Where to get help:</p>
    <ul>
      <li>If you are a Passbolt Pro Edition subscriber send us an <a href="mailto:contact@passbolt.com">email</a> with the details.</li>
      <li>If you are a Passbolt Community Edition user you can open new thread on the <a href="https://community.passbolt.com/c/installation-issues">community forum</a>.</li>
    </ul>

    <p>The more information you provide about what you did, what you tried, how your environment look like,
the easiest it will be for people to help you.</p>

    <div class="last-updated">
      <h3>Last updated</h3>
      <p>This article was last updated on 
November
26th,
2021.</p>
    </div>

  </div>
  <div class="col4 last push1">

    <div class="message tldr">
    <p>Your installation is not based on a debian package?</p>
    
    <a href="/hosting/upgrade/ce/migrate-to-debian.html" class="button ">Migrate passbolt to debian package</a>
    
</div>

    <div class="message tldr notice">
    <p>Are you experiencing issues when updating passbolt?</p>
    
    <a href="https://community.passbolt.com/c/installation-issues" class="button primary">Ask the community!</a>
    
</div>

    <div class="message ">
    <p></p>
    
</div>

  </div>
</div>
